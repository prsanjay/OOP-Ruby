<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
	<title>Regexp</title>
	<link rel="stylesheet" href="includes/styles.css" type="text/css" media="all">
</head>
<body>
<div id="header">
	<h1>Programming Ruby</h1>
	<h2>The Pragmatic Programmer's Guide</h2>
</div><div id="menutop" class="menu">
	
	<a href="frameset.html" class="contents" target="_top">^Contents^</a>
</div><script type="text/javascript">
	top.frames.toc && top.frames.toc.SyncChanges && top.frames.toc.SyncChanges(null,'ref_c_regexp',location.hash);
	top.document.title=document.title+' @ Programming Ruby';
</script>


<h1 class="class" id="Regexp">class <strong>Regexp</strong> &lt; Object</h1>

<p>A <code class="class">Regexp</code> holds a regular expression, used to match a pattern against   strings. Regexps are created using the <code>/.../</code> and <code>%r{...}</code> literals, and by the <code class="class_class_method"><a href="ref_c_regexp.html#Regexp.new"><span class="class">Regexp</span>.<span class="method">new</span></a></code> constructor.</p>

<h2 class="refsubsection" id="constants">constants</h2>
<table class="constants"><tr class="firstRow">
	<td id="Regexp.EXTENDED"><code class="constant">EXTENDED</code></td>
	<td>Ignore spaces and newlines in regexp.</td>
</tr><tr>
	<td id="Regexp.IGNORECASE"><code class="constant">IGNORECASE</code></td>
	<td>Matches are case insensitive.</td>
</tr><tr>
	<td id="Regexp.MULTILINE"><code class="constant">MULTILINE</code></td>
	<td>Newlines treated as any other character.</td>
</tr></table>

<h2 class="refsubsection" id="classmethods">class methods</h2>
<dl class="methodlist">
	<dt id="Regexp.compile">compile</dt>
		<dd class="callseq">Regexp.compile( <i class="obj">pattern</i> [, <i class="obj">options</i> [<i class="obj">lang</i>]] ) &rarr; <i class="obj">aRegexp</i></dd>
		<dd class="desc">Synonym for <code>Regexp.new</code>.</dd>

	<dt id="Regexp.escape">escape</dt>
		<dd class="callseq">Regexp.escape( <i class="obj">aString</i> )  &rarr; <i class="obj">aNewString</i></dd>
		<dd class="desc">Escapes any characters that would have special meaning in a regular expression. For any string, <code>Regexp.escape(<i class="obj">str</i>)=~<i class="obj">str</i></code> will be true.

<div><code class="block">Regexp.escape('\\*?{}.') <span class="output"><span class="outputmark">&rarr;</span> \\\\\*\?\{\}\.</span></code></div>

		</dd>

	<dt id="Regexp.last_match">last_match</dt>
		<dd class="callseq">Regexp.last_match  &rarr; <i class="obj">aMatchData</i></dd>
		<dd class="desc">Returns the <code class="class"><a href="ref_c_matchdata.html">MatchData</a></code> object generated by the last successful pattern match. Equivalent to reading the global variable <var>$~</var>. See the reference for the <code class="class"><a href="ref_c_matchdata.html">MatchData</a></code> class.</dd>

	<dt id="Regexp.new">new</dt>
		<dd class="callseq">Regexp.new( <i class="obj">pattern</i> [, <i class="obj">options</i> [<i class="obj">lang</i>]] ) &rarr; <i class="obj">aRegexp</i></dd>
		<dd class="desc">Constructs a new regular expression from <i class="obj">pattern</i>, which can be either a <code>String</code> or a <code>Regexp</code> (in which case that regexp's options are not propagated). If <i class="obj">options</i> is a <code>Fixnum</code>, it should be one or more of the constants <code>Regexp::EXTENDED</code>, <code>Regexp::IGNORECASE</code>, and <code>Regexp::POSIXLINE</code>, <em>or</em>-ed together. Otherwise, if <i class="obj">options</i> is not <code>nil</code>, the regexp will be case insensitive. The <i class="obj">lang</i> parameter enables multibyte support for the regexp: `n', `N' = none, `e', `E' =  EUC, `s', `S' = SJIS, `u', `U' = UTF-8.

<div><code class="block">r1 = Regexp.new('^a-z+:\\s+\w+') <span class="output"><span class="outputmark">&rarr;</span> /^a-z+:\s+\w+/</span>
r2 = Regexp.new(r1, true) <span class="output"><span class="outputmark">&rarr;</span> /^a-z+:\s+\w+/i</span>
r3 = Regexp.new(r2, Regexp::EXTENDED) <span class="output"><span class="outputmark">&rarr;</span> /^a-z+:\s+\w+/x</span></code></div>

		</dd>

	<dt id="Regexp.quote">quote</dt>
		<dd class="callseq">Regexp.quote( <i class="obj">aString</i> )  &rarr; <i class="obj">aNewString</i></dd>
		<dd class="desc">Synonym for <code>Regexp.escape</code>.</dd>
</dl>
	
<h2 class="refsubsection" id="instancemethods">instance methods</h2>
<dl class="methodlist">
	<dt id="Regexp._eq_eq">==</dt>
		<dd class="callseq"><i class="obj">rxp</i> == <i class="obj">aRegexp</i>  &rarr; <code class="const">true</code> or <code class="const">false</code></dd>
		<dd class="desc">Equality&mdash;Two regexps are equal if their patterns are identical, they have the same character set code, and their <code>casefold?</code> values are the same.

<div><code class="block">/abc/  == /abc/x <span class="output"><span class="outputmark">&rarr;</span> false</span>
/abc/  == /abc/i <span class="output"><span class="outputmark">&rarr;</span> false</span>
/abc/u == /abc/n <span class="output"><span class="outputmark">&rarr;</span> false</span></code></div>

		</dd>

	<dt id="Regexp._eq_eq_eq">===</dt>
		<dd class="callseq"><i class="obj">rxp</i> === <i class="obj">aString</i>  &rarr; <code class="const">true</code> or <code class="const">false</code></dd>
		<dd class="desc">Case Equality&mdash;Synonym for <code class="class_instance_method"><a href="ref_c_regexp.html#Regexp._eq_sd"><span class="class">Regexp</span>#<span class="method">=~</span></a></code> used in case statements.

<div><code class="block">a = "HELLO"
case a
when /^a-z*$/; print "Lower case\n"
when /^A-Z*$/; print "Upper case\n"
else;            print "Mixed case\n"
end</code></div>
<p class="produces"><em>produces:</em></p>
<div><code class="block">Upper case</code></div>

		</dd>

	<dt id="Regexp._eq_sd">=~</dt>
		<dd class="callseq"><i class="obj">rxp</i> =~ <i class="obj">aString</i>  &rarr; <i class="obj">anInteger</i> or <code>nil</code></dd>
		<dd class="desc">Match&mdash;Matches <i class="obj">rxp</i> against <i class="obj">aString</i>, returning the offset of the start of the match or <code>nil</code> if the match failed.

<div><code class="block">/SIT/  =~ "insensitive" <span class="output"><span class="outputmark">&rarr;</span> nil</span>
/SIT/i =~ "insensitive" <span class="output"><span class="outputmark">&rarr;</span> 5</span></code></div>

		</dd>

	<dt id="Regexp._sd">~</dt>
		<dd class="callseq">~ <i class="obj">rxp</i>  &rarr; <i class="obj">anInteger</i> or <code>nil</code></dd>
		<dd class="desc">Match&mdash;Matches <i class="obj">rxp</i> against the contents of <code>$_</code>. Equivalent to
      <code><i class="obj">rxp</i> =~ $_</code>.

<div><code class="block">$_ = "input data"
~ /at/ <span class="output"><span class="outputmark">&rarr;</span> 7</span></code></div>

		</dd>

	<dt id="Regexp.casefold_qm">casefold?</dt>
		<dd class="callseq"><i class="obj">rxp</i>.casefold?  &rarr; <code class="const">true</code> or <code class="const">false</code></dd>
		<dd class="desc">Returns the value of the case-insensitive flag.

		</dd>

	<dt id="Regexp.kcode">kcode</dt>
		<dd class="callseq"><i class="obj">rxp</i>.kcode  &rarr; <i class="obj">aString</i></dd>
		<dd class="desc">Returns the  character set code for the regexp.

		</dd>

	<dt id="Regexp.match">match</dt>
		<dd class="callseq"><i class="obj">rxp</i>.match(<i class="obj">aString</i>)  &rarr; <i class="obj">aMatchData</i> or <code>nil</code></dd>
		<dd class="desc">Returns a <code class="class"><a href="ref_c_matchdata.html">MatchData</a></code> object describing the match, or <code>nil</code> if there was no match. This is equivalent to retrieving the value of the special variable <var>$~</var> following a normal match.

<div><code class="block">/(.)(.)(.)/.match("abc")[2] <span class="output"><span class="outputmark">&rarr;</span> "b"</span></code></div>

		</dd>

	<dt id="Regexp.source">source</dt>
		<dd class="callseq"><i class="obj">rxp</i>.source  &rarr; <i class="obj">aString</i></dd>
		<dd class="desc">Returns the original string of the pattern.

<div><code class="block">/ab+c/ix.source <span class="output"><span class="outputmark">&rarr;</span> "ab+c"</span></code></div></dd>
</dl>

<div id="menubot" class="menu">
	
	<a href="frameset.html" class="contents" target="_top">^Contents^</a>
</div>

<div id="copyright">
	<p>Extracted from the book "Programming Ruby -  The Pragmatic Programmer's Guide"</p>
	<p>Copyright &copy; 2001 by Addison Wesley Longman, Inc. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).</p>
	<p>Distribution of substantively modified versions of this document is prohibited without the explicit permission of the copyright holder.</p>
	<p>Distribution of the work or derivative of the work in any standard (paper) book form is prohibited unless prior permission is obtained from the copyright holder.</p>
</div>

<a href="ref_c_regexp.html" target="_top" id="expand" title="Show this content in its own window" onclick="this.href=window.location.href"><img src="includes/expand.png" alt="Show this content in its own window" width="15" height="15"></a>
<script type="text/javascript">
	if (top==self && document.getElementById){
		ex = document.getElementById('expand');
		img = ex.getElementsByTagName('img')[0];
		ex.title=img.alt="Show this content alongside the Table of Contents";
		ex.onclick=function(){ return true }
		ex.href="frameset.html?content="+escape(self.location.href);
		img.src="includes/collapse.png";
	}
</script>
</body>
</html>
