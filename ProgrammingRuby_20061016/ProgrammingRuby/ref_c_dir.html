<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
	<title>Dir</title>
	<link rel="stylesheet" href="includes/styles.css" type="text/css" media="all">
</head>
<body>
<div id="header">
	<h1>Programming Ruby</h1>
	<h2>The Pragmatic Programmer's Guide</h2>
</div><div id="menutop" class="menu">
	
	<a href="frameset.html" class="contents" target="_top">^Contents^</a>
</div><script type="text/javascript">
	top.frames.toc && top.frames.toc.SyncChanges && top.frames.toc.SyncChanges(null,'ref_c_dir',location.hash);
	top.document.title=document.title+' @ Programming Ruby';
</script>


<h1 class="class" id="Dir">class <strong>Dir</strong> &lt; Object</h1>

<p>Objects of class <code class="class">Dir</code> are directory streams representing   directories in the   underlying file system. They provide a variety of ways to list   directories and their contents.  See also <code class="class">File</code>, page   301.     The directory used in these examples contains the two regular files   (<code>config.h</code> and <code>main.rb</code>), the parent directory (<code>..</code>), and   the directory itself (<code>.</code>).</p>

<h2>mixins</h2>
<dl>
	<dt><code class="module"><a href="ref_m_enumerable.html#Enumerable">Enumerable</a></code></dt>
	<dd><code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.collect">collect</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.detect">detect</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.each_with_index">each_with_index</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.entries">entries</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.find">find</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.find_all">find_all</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.grep">grep</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.include">include?</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.map">map</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.max">max</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.member">member?</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.min">min</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.reject">reject</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.select">select</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.sort">sort</a></code>, <code class="module_instance_method"><a href="ref_m_enumerable.html#Enumerable.to_a">to_a</a></code></dd>
</dl>


<h2 class="refsubsection" id="classmethods">class methods</h2>
<dl class="methodlist">
	<dt id="Dir._ob_cb">[ ]</dt>
		<dd class="callseq">Dir[ <i class="obj">aString</i> ]  &rarr; <i class="obj">anArray</i></dd>
		<dd class="desc">Returns <i class="obj">anArray</i> of filenames found by
      expanding the pattern given in <i class="obj">aString</i>.
      Note that this pattern is not a regexp (it's closer to a shell glob)
      and may contain the following metacharacters:

      <table>

        <tr>
		<td><code>**</code></td>
		<td>Matches subdirectories recursively</td>
	</tr>
	<tr>
		<td><code>*</code></td>
		<td>Matches zero or more characters</td>
	</tr>
	<tr>
		<td><code>?</code></td>
		<td>Matches any single character</td>
	</tr>
	<tr>
		<td><code>[ <em>charSet</em> ]</code></td>
		<td>Matches any character from the given  set of characters. A range of characters is written as
           <em>charFrom</em><code>-</code><em>charTo</em>. The set may be negated
           with an initial uparrow (<code>^</code>).</td>
	</tr>
	<tr>
		<td><code>{ <em>opt, opt, ...</em> }</code></td>
		<td>Matches any one of the optional strings</td>
	</tr>
</table>

<div><code class="block">Dir["config.?"] <span class="output"><span class="outputmark">&rarr;</span> ["config.h"]</span>
Dir["*.[a-z][a-z]"] <span class="output"><span class="outputmark">&rarr;</span> ["main.rb"]</span>
Dir["*.[^r]*"] <span class="output"><span class="outputmark">&rarr;</span> ["config.h"]</span>
Dir["*.{rb,h}"] <span class="output"><span class="outputmark">&rarr;</span> ["main.rb", "config.h"]</span>
Dir["*"] <span class="output"><span class="outputmark">&rarr;</span> ["config.h", "main.rb"]</span></code></div>

		</dd>

	<dt id="Dir.chdir">chdir</dt>
		<dd class="callseq">Dir.chdir( [ <i class="obj">aString</i>] )  &rarr; 0</dd>
		<dd class="desc">Changes the current working directory of the process to the given string. When called without an argument, changes the directory to the value of the environment variable <code>HOME</code>, or <code>LOGDIR</code>. Raises a <code class="exception">SystemCallError</code> (probably <code class="class">Errno::ENOENT</code>) if the target directory does not exist.

<div><code class="block">Dir.chdir("/var/spool/mail") <span class="output"><span class="outputmark">&rarr;</span> 0</span>
Dir.pwd <span class="output"><span class="outputmark">&rarr;</span> "/var/spool/mail"</span></code></div>

		</dd>

	<dt id="Dir.chroot">chroot</dt>
		<dd class="callseq">Dir.chroot( <i class="obj">aString</i> )  &rarr; 0</dd>
		<dd class="desc">Changes this process's idea of the file system root. Only a privileged process may make this call. Not available on all platforms.  On Unix systems, see <code>chroot(2)</code> for more information. 

<div><code class="block">Dir.chdir("/production/secure/root")
Dir.chroot("/production/secure/root") <span class="output" style="width:5em"><span class="outputmark">&rarr;</span> 0</span>
Dir.pwd <span class="output" style="width:5em"><span class="outputmark">&rarr;</span> "/"</span></code></div>

		</dd>

	<dt id="Dir.delete">delete</dt>
		<dd class="callseq">Dir.delete( <i class="obj">aString</i> )  &rarr; 0</dd>
		<dd class="desc">Deletes the named directory. Raises a subclass of
      <code class="exception">SystemCallError</code> if the directory isn't empty.

		</dd>

	<dt id="Dir.entries">entries</dt>
		<dd class="callseq">Dir.entries( <i class="obj">aString</i> )  &rarr; <i class="obj">anArray</i></dd>
		<dd class="desc">Returns an array containing all of the filenames in the given
      directory. Will raise a <code class="exception">SystemCallError</code> if the named directory
      doesn't exist.

<div><code class="block">Dir.entries("testdir") <span class="output"><span class="outputmark">&rarr;</span> [".", "..", "config.h", "main.rb"]</span></code></div>

		</dd>

	<dt id="Dir.foreach">foreach</dt>
		<dd class="callseq">Dir.foreach( <i class="obj">aString</i> ) {| filename | block } &rarr; <code>nil</code></dd>
		<dd class="desc">Calls the block once for each entry in the named directory,
      passing the filename of each entry as a parameter to the block.

<div><code class="block">Dir.foreach("testdir") {|x| puts("Got " + x) }</code></div>
<p class="produces"><em>produces:</em></p>
<div><code class="block">Got .
Got ..
Got config.h
Got main.rb</code></div>

		</dd>

	<dt id="Dir.getwd">getwd</dt>
		<dd class="callseq">Dir.getwd  &rarr; <i class="obj">aString</i></dd>
		<dd class="desc">Returns the path to the current working directory of this
      process as a string.

<div><code class="block">Dir.chdir("/tmp") <span class="output"><span class="outputmark">&rarr;</span> 0</span>
Dir.getwd <span class="output"><span class="outputmark">&rarr;</span> "/tmp"</span></code></div>

		</dd>

	<dt id="Dir.glob">glob</dt>
		<dd class="callseq">Dir.glob( <i class="obj">aString</i> )  &rarr; <i class="obj">anArray</i></dd>
		<dd class="desc">Synonym for <code class="class_class_method"><a href="ref_c_dir.html#Dir._ob_cb"><span class="class">Dir</span>.<span class="method">[]</span></a></code>.

		</dd>

	<dt id="Dir.mkdir">mkdir</dt>
		<dd class="callseq">Dir.mkdir( <i class="obj">aString</i> [, <i class="obj">anInteger</i>] )  &rarr; 0</dd>
		<dd class="desc">Makes a new directory named by <i class="obj">aString</i>, with permissions specified by the optional parameter <i class="obj">anInteger</i>. The permissions may be modified by the value of <code class="class_class_method"><a href="ref_c_file.html#File.umask"><span class="class">File</span>.<span class="method">umask</span></a></code>, and are ignored on NT. Raises a <code class="exception">SystemCallError</code> if the directory cannot be created. See also the <a href="ref_c_file.html#permissions">discussion of permissions</a>.</dd>

	<dt id="Dir.new">new</dt>
		<dd class="callseq">Dir.new( <i class="obj">aString</i> )  &rarr; <i class="obj">aDir</i></dd>
		<dd class="desc">Returns a new directory object for the named directory.

		</dd>

	<dt id="Dir.open">open</dt>
		<dd class="callseq">Dir.open( <i class="obj">aString</i> )  &rarr; <i class="obj">aDir</i></dd>
		<dd class="callseq">Dir.open( <i class="obj">aString</i> ) {| aDir | block }  &rarr; <code>nil</code></dd>
		<dd class="desc">With no block, <code class="method">open</code> is a synonym  for <code class="class_class_method"><a href="ref_c_dir.html#Dir.new"><span class="class">Dir</span>.<span class="method">new</span></a></code>. If a block is present, it is passed <i class="obj">aDir</i> as a parameter. The directory is closed at the end of the block, and <code class="class_class_method"><a href="ref_c_dir.html#Dir.open"><span class="class">Dir</span>.<span class="method">open</span></a></code> returns <code>nil</code>. </dd>

	<dt id="Dir.pwd">pwd</dt>
		<dd class="callseq">Dir.pwd  &rarr; <i class="obj">aString</i></dd>
		<dd class="desc">Synonym for <code class="class_class_method"><a href="ref_c_dir.html#Dir.getwd"><span class="class">Dir</span>.<span class="method">getwd</span></a></code>.

		</dd>

	<dt id="Dir.rmdir">rmdir</dt>
		<dd class="callseq">Dir.rmdir( <i class="obj">aString</i> )  &rarr; <code class="const">true</code></dd>
		<dd class="desc">Synonym for <code class="class_class_method"><a href="ref_c_dir.html#Dir.delete"><span class="class">Dir</span>.<span class="method">delete</span></a></code>. </dd>

	<dt id="Dir.unlink">unlink</dt>
		<dd class="callseq">Dir.unlink( <i class="obj">aString</i> )  &rarr; <code class="const">true</code></dd>
		<dd class="desc">Synonym for <code class="class_class_method"><a href="ref_c_dir.html#Dir.delete"><span class="class">Dir</span>.<span class="method">delete</span></a></code>.</dd>
</dl>

<h2 class="refsubsection" id="instancemethods">instance methods</h2>
<dl class="methodlist">
	<dt id="Dir.close">close</dt>
		<dd class="callseq"><em>dir</em>.close  &rarr; <code>nil</code></dd>
		<dd class="desc">Closes the directory stream.
      Any further attempts to access <em>dir</em> will raise an
      <code class="exception">IOError</code>.

<div><code class="block">d = Dir.new("testdir")
d.close <span class="output"><span class="outputmark">&rarr;</span> nil</span></code></div>

		</dd>

	<dt id="Dir.each">each</dt>
		<dd class="callseq"><em>dir</em>.each {|  | block }  &rarr; <em>dir</em></dd>
		<dd class="desc">Calls the block once for each entry in this directory, passing the filename of each entry as a parameter to the block.

<div><code class="block">d = Dir.new("testdir")
d.each  {|x| puts ("Got " + x) }</code></div>
<p class="produces"><em>produces:</em></p>
<div><code class="block">Got .
Got ..
Got config.h
Got main.rb</code></div>

		</dd>

	<dt id="Dir.read">read</dt>
		<dd class="callseq"><em>dir</em>.read  &rarr; <i class="obj">aString</i> or <code>nil</code></dd>
		<dd class="desc">Reads the next entry from <em>dir</em> and returns it as a string.  Returns <code>nil</code> at the end of the stream.

<div><code class="block">d = Dir.new("testdir")
d.read <span class="output"><span class="outputmark">&rarr;</span> "."</span>
d.read <span class="output"><span class="outputmark">&rarr;</span> ".."</span>
d.read <span class="output"><span class="outputmark">&rarr;</span> "config.h"</span></code></div>

		</dd>

	<dt id="Dir.rewind">rewind</dt>
		<dd class="callseq"><em>dir</em>.rewind  &rarr; <em>dir</em></dd>
		<dd class="desc">Repositions <em>dir</em> to the first entry.

<div><code class="block">d = Dir.new("testdir")
d.read <span class="output"><span class="outputmark">&rarr;</span> "."</span>
d.rewind <span class="output"><span class="outputmark">&rarr;</span> #&lt;Dir:0x401b5cac&gt;</span>
d.read <span class="output"><span class="outputmark">&rarr;</span> "."</span></code></div>

		</dd>

	<dt id="Dir.seek">seek</dt>
		<dd class="callseq"><em>dir</em>.seek( <i class="obj">anInteger</i> )  &rarr; <em>dir</em></dd>
		<dd class="desc">Seeks to a particular location in <em>dir</em>.
      <i class="obj">anInteger</i> must be a value returned by
      <code class="class_instance_method"><a href="ref_c_dir.html#Dir.tell"><span class="class">Dir</span>#<span class="method">tell</span></a></code>.

<div><code class="block">d = Dir.new("testdir")
d.read <span class="output"><span class="outputmark">&rarr;</span> "."</span>
i = d.tell
d.read <span class="output"><span class="outputmark">&rarr;</span> ".."</span>
d.seek(i) <span class="output"><span class="outputmark">&rarr;</span> #&lt;Dir:0x401b5cac&gt;</span>
d.read <span class="output"><span class="outputmark">&rarr;</span> ".."</span></code></div>

		</dd>

	<dt id="Dir.tell">tell</dt>
		<dd class="callseq"><em>dir</em>.tell  &rarr; <i class="obj">anInteger</i></dd>
		<dd class="desc">Returns the current position in <em>dir</em>. See also <code class="class_instance_method"><a href="ref_c_dir.html#Dir.seek"><span class="class">Dir</span>#<span class="method">seek</span></a></code>.

<div><code class="block">d = Dir.new("testdir")
d.tell <span class="output"><span class="outputmark">&rarr;</span> 0</span>
d.read <span class="output"><span class="outputmark">&rarr;</span> "."</span>
d.tell <span class="output"><span class="outputmark">&rarr;</span> 12</span></code></div></dd>
</dl>

<div id="menubot" class="menu">
	
	<a href="frameset.html" class="contents" target="_top">^Contents^</a>
</div>

<div id="copyright">
	<p>Extracted from the book "Programming Ruby -  The Pragmatic Programmer's Guide"</p>
	<p>Copyright &copy; 2001 by Addison Wesley Longman, Inc. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at <a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).</p>
	<p>Distribution of substantively modified versions of this document is prohibited without the explicit permission of the copyright holder.</p>
	<p>Distribution of the work or derivative of the work in any standard (paper) book form is prohibited unless prior permission is obtained from the copyright holder.</p>
</div>

<a href="ref_c_dir.html" target="_top" id="expand" title="Show this content in its own window" onclick="this.href=window.location.href"><img src="includes/expand.png" alt="Show this content in its own window" width="15" height="15"></a>
<script type="text/javascript">
	if (top==self && document.getElementById){
		ex = document.getElementById('expand');
		img = ex.getElementsByTagName('img')[0];
		ex.title=img.alt="Show this content alongside the Table of Contents";
		ex.onclick=function(){ return true }
		ex.href="frameset.html?content="+escape(self.location.href);
		img.src="includes/collapse.png";
	}
</script>
</body>
</html>
